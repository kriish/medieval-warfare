<doctype html />
<html>
<head>
<script type="text/javascript">
<!--

function canvasWidth() {
  return 600;
  }
    
function canvasHeight() {
    return 600;
}
    
function drawArrow(context) {
context.beginPath();
context.moveTo(0, 40);
context.lineTo(240, 40);
context.moveTo(260, 40);
context.lineTo(500, 40);
context.moveTo(495, 35);
context.lineTo(500, 40);
context.lineTo(495, 45);   
context.strokeStyle = "#000";
context.stroke();
}

function drawGrid(context) {
    var cellSize = 50;
  for (var x = 0.5; x < canvasWidth(); x += cellSize) {
    context.moveTo(x, 0);
    context.lineTo(x, canvasHeight());
  }
 
  for (var y = 0.5; y < canvasHeight(); y += cellSize) {
    context.moveTo(0, y);
    context.lineTo(canvasWidth(), y);
  }    
  
  context.strokeStyle = "#eee";
  context.stroke();
  
  chooseTile(context);
}
// x and y are the coordinates clicked based on which we choose the tile
function chooseTile(context, x,y) {
    x % 50
    context.fillStyle = "rgba(0, 0, 200, 0.5)";
   context.fillRect(0.5,0.5,50.5,50.5);
//   context.strokeStyle = "#ff0";
//   context.stroke();
}
 
function draw() {
  var map_canvas = document.getElementById("map");
  var b_context = map.getContext("2d");
  b_context.fillRect(50, 25, 150, 100);
  drawGrid(b_context);
  drawArrow(b_context);
}

function showPopup(name){
  document.myform.stage.value = name
}
function showTutorial(name){
  document.myform.stage.value = name
}

function setBackgroundImage(context) {
//    var sun = document.getElementById("sun");
    // or
    var sun = new Image();
   sun.src = "img/map1.jpg";

  context.drawImage(sun, 0, 0);
}

function writeText(context) {
    context.font = "bold 16px sans-serif";
    context.fillText("Mamadou", 248, 43);
//    context.fillText("y", 58, 165);
}

function getCursorPosition(e) {
    var x;
    var y;
    if (e.pageX != undefined && e.pageY != undefined) {
    x = e.pageX;
	y = e.pageY;
    }
    else {
	x = e.clientX + document.body.scrollLeft +
            document.documentElement.scrollLeft;
	y = e.clientY + document.body.scrollTop +
            document.documentElement.scrollTop;
    }
     x -= gCanvasElement.offsetLeft;
    y -= gCanvasElement.offsetTop;
     var cell = new Cell(Math.floor(y/kPieceHeight),
                        Math.floor(x/kPieceWidth));
    return cell;

}
//Highlight a game square on click
function selectSquare(event) {
    var cell = getCursorPosition(event);

}

window.onload = function() {
  var canvas = document.getElementById("map");
  var context = canvas.getContext("2d");
  setBackgroundImage(context);
  writeText(context);
  canvas.addEventListener("click", selectSquare, false);
  drawGrid(context);
}
//-->
</script>

</head>
<body>
<!-- change to canvas -->
<canvas id="map" width="600" height="600" style="border:1px dotted;float:left"  ></canvas><!--onclick="draw();return false"-->

<!--http://www.tutorialspoint.com/javascript/javascript_image_map.htm-->
<form name="myform">
   <input type="text" name="stage" size="20" />
</form>

</body>
</html>